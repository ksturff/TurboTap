<!DOCTYPE html>
<html lang=\"en\">
<head>
  <meta charset=\"UTF-8\">
  <title>Turbo Tap Parkour</title>
  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\" />
  <style>
    body { margin: 0; overflow: hidden; background: #0d0d0d; }
    canvas { display: block; margin: 0 auto; background: #0d0d0d; }
    button {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 15px 30px;
      font-size: 20px;
      background: #ff3366;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    #startScreen { display: block; }
    #pauseBtn { top: 20px; left: 40%; transform: translateX(-50%); display: none; }
    #resumeBtn { top: 20px; left: 60%; transform: translateX(-50%); display: none; }
    #restartBtn, #gameOverScreen { display: none; }
    #coinCounter, #distanceCounter {
      position: absolute;
      color: white;
      font-size: 20px;
      font-family: sans-serif;
    }
    #coinCounter { top: 20px; left: 20px; }
    #distanceCounter { top: 20px; right: 20px; }
  </style>
</head>
<body>
<canvas id=\"gameCanvas\" width=\"480\" height=\"720\"></canvas>
<div id=\"coinCounter\">Coins: 0</div>
<div id=\"distanceCounter\">Distance: 0m</div>
<button id=\"startScreen\">Start Game</button>
<button id=\"pauseBtn\">Pause</button>
<button id=\"resumeBtn\">Resume</button>
<button id=\"restartBtn\">Restart</button>
<button id=\"gameOverScreen\">Game Over - Click to Restart</button>
<script>
const runnerImg=new Image();runnerImg.src='Runner1.png';
const obstacleImg=new Image();obstacleImg.src='Obstacle1.png';
const backgrounds=[],platformsImages=[],particles=[];
for(let i=1;i<=4;i++){const img=new Image();img.src=`Background${i}.png`;backgrounds.push(img);}
for(let i=1;i<=3;i++){const img=new Image();img.src=`Platform${i}.png`;platformsImages.push(img);}

const canvas=document.getElementById('gameCanvas');
const ctx=canvas.getContext('2d');

let assetsLoaded=0;
const totalAssets=backgrounds.length+platformsImages.length+2;
[runnerImg,obstacleImg,...backgrounds,...platformsImages].forEach(img=>{
  img.onload=()=>{if(++assetsLoaded===totalAssets)initializeGame();};
});

function initializeGame(){
  let gameStarted=false,gamePaused=false,gameOver=false;
  let player={x:50,y:500,width:40,height:55,vy:0};
  let platforms=[{x:0,y:550,width:480,height:20,obstacle:false,platformType:0}];
  let coins=[],distance=0,speed=3,collectedCoins=0;
  let backgroundX=0,currentBackgroundIndex=0,backgroundSpeed=2;

  document.getElementById('startScreen').onclick=()=>{
    document.getElementById('startScreen').style.display='none';
    document.getElementById('pauseBtn').style.display='block';
    gameStarted=true;
    requestAnimationFrame(gameLoop);
  };
  document.getElementById('pauseBtn').onclick=()=>{gamePaused=true;togglePauseResume();};
  document.getElementById('resumeBtn').onclick=()=>{gamePaused=false;togglePauseResume();requestAnimationFrame(gameLoop);};
  document.getElementById('restartBtn').onclick=()=>location.reload();
  document.getElementById('gameOverScreen').onclick=()=>location.reload();

  function togglePauseResume(){
    document.getElementById('pauseBtn').style.display=gamePaused?'none':'block';
    document.getElementById('resumeBtn').style.display=gamePaused?'block':'none';
  }

  document.addEventListener('keydown',e=>{if(e.code==='Space')player.vy=-12;});
  canvas.addEventListener('touchstart',()=>{player.vy=-12;});

  function spawnParticles(x,y){
    for(let i=0;i<10;i++)particles.push({x,y,vx:(Math.random()-0.5)*4,vy:(Math.random()-1)*4,alpha:1});
  }

  function drawEverything(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.drawImage(backgrounds[currentBackgroundIndex],backgroundX,0,canvas.width,canvas.height);
    ctx.drawImage(backgrounds[(currentBackgroundIndex+1)%backgrounds.length],backgroundX+canvas.width,0,canvas.width,canvas.height);
    platforms.forEach(plat=>{
      ctx.drawImage(platformsImages[plat.platformType],plat.x,plat.y,plat.width,20);
      if(plat.obstacle)ctx.drawImage(obstacleImg,plat.x+plat.width/2-10,plat.y-20,20,20);
    });
    ctx.fillStyle='gold';coins.forEach(coin=>{ctx.beginPath();ctx.arc(coin.x+10,coin.y+10,10,0,Math.PI*2);ctx.fill();});
    ctx.drawImage(runnerImg,player.x,player.y,player.width,player.height);
    particles.forEach((p,i)=>{p.x+=p.vx;p.y+=p.vy;p.alpha-=0.05;if(p.alpha<=0)particles.splice(i,1);ctx.fillStyle=`rgba(0,255,255,${p.alpha})`;ctx.beginPath();ctx.arc(p.x,p.y,2,0,Math.PI*2);ctx.fill();});
  }

  function gameLoop(){
    if(!gameStarted||gamePaused||gameOver)return;

    distance+=0.1;speed+=0.0005;
    document.getElementById('distanceCounter').innerText=`Distance: ${Math.floor(distance)}m`;
    document.getElementById('coinCounter').innerText=`Coins: ${collectedCoins}`;

    platforms.forEach(plat=>plat.x-=speed);coins.forEach(coin=>coin.x-=speed);

    if(platforms[platforms.length-1].x<300){
      const platWidth=80+Math.random()*120,platY=400+Math.random()*250;
      platforms.push({x:480,y:platY,width:platWidth,height:20,obstacle:Math.random()<0.3,platformType:Math.floor(Math.random()*platformsImages.length)});
      if(Math.random()<0.5)coins.push({x:480+platWidth/2-10,y:platY-30,width:20,height:20});
    }

    player.vy+=0.5;player.y+=player.vy;

    let onGround=false;
    platforms.forEach(plat=>{
      if(player.x+player.width>plat.x&&player.x<plat.x+plat.width&&player.y+player.height>plat.y&&player.y+player.height<plat.y+plat.height+15&&player.vy>=0){if(!onGround)spawnParticles(player.x+20,player.y+55);player.y=plat.y-player.height;player.vy=0;onGround=true;}
      if(plat.obstacle&&player.x+30>plat.x+plat.width/2-10&&player.x+10<plat.x+plat.width/2+10&&player.y+50>plat.y-20&&player.y<plat.y)gameOver=true;
    });

    for(let i=coins.length-1;i>=0;i--){const coin=coins[i];if(player.x+player.width-10>coin.x&&player.x+10<coin.x+coin.width&&player.y+player.height-10>coin.y&&player.y+10<coin.y+coin.height){collectedCoins++;coins.splice(i,1);}}

    backgroundX-=backgroundSpeed;if(backgroundX<=-canvas.width){backgroundX=0;currentBackgroundIndex=(currentBackgroundIndex+1)%backgrounds.length;}
    if(player.y>720)gameOver=true;
    drawEverything();
    if(gameOver)document.getElementById('gameOverScreen').style.display='block';else requestAnimationFrame(gameLoop);
  }
}
</script>
</body>
</html>
